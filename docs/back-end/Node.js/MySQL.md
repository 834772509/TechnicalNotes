# MySQL 数据库

## 基本概念

### 为什么需要数据库？

- 任何的软件系统都需要存放大量的数据，这些数据通常是非常复杂和庞大的：
  - 比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等；
  - 比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等；
  - 比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等；
- 那么这些信息不能直接存储到文件中吗？可以，但是文件系统有很多的缺点：
  - 很难以合适的方式组织数据（多张表之前的关系合理组织）；
  - 并且对数据进行增删改查中的复杂操作（虽然一些简单确实可以），并且保证单操作的原子性；
  - 很难进行数据共享，比如一个数据库需要为多个程序服务，如何进行很好的数据共享；
  - 需要考虑如何进行数据的高效备份、迁移、恢复；
  - 等等...
- 数据库通俗来讲就是一个存储数据的仓库，数据库本质上就是一个软件、一个程序。

### 常见的数据库有哪些？

- 关系型数据库：MySQL、Oracle、DB2、SQL Server、Postgre SQL 等；
  - 关系型数据库通常我们会创建很多个二维数据表；
  - 数据表之间相互关联起来，形成一对一、一对多、多对对等关系；
  - 之后可以利用 SQL 语句在多张表中查询我们所需的数据；
  - 支持事务，对数据的访问更加的安全；
- 非关系型数据库：MongoDB、Redis、Memcached、HBse 等；
  - 非关系型数据库的英文其实是 Not only SQL，也简称为 NoSQL；
  - 相当而已非关系型数据库比较简单一些，存储数据也会更加自由（甚至我们可以直接将一个复杂的 json 对象直入到数据库中）；
  - NoSQL 是基于 Key-Value 的对应关系，并且查询的过程中不需要经过 SQL 解析，所以性能更高；
  - NoSQL 通常不支持事务，需要在自己的程序中来保证一些原子性的操作；
- 如何在开发中选择他们呢？具体的选择会根据不同的项目进行综合的分析，我这里给一点点建议：
  - 目前在公司进行后端开发（Node、Java、Go 等），还是以关系型数据库为主；
  - 比较常用的用到非关系型数据库的，在爬取大量的数据进行存储时，会比较常见；

### 认识 MySQL

- MySQL 的介绍：
  - MySQL 原本是一个开源的数据库，原开发者为瑞典的 MySQL AB 公司；
  - 在 2008 年被 Sun 公司收购；在 2009 年，Sun 被 Oracle 收购；
  - 所以目前 MySQL 归属于 Oracle；
- MySQL 是一个关系型数据库，其实本质上就是一款软件、一个程序：
  - 这个程序中管理着多个数据库；
  - 每个数据库中可以有多张表；
  - 每个表中可以有多条数据；

### MySQL 默认的数据库

- infomation_schema：信息数据库，其中包括 MySQL 在维护的其他数据库、表、 - 、访问权限等信息；
- performance_schema：性能数据库，记录着 MySQL Server 数据库引擎在运行 - 程中的一些资源消耗相关的信息；
- mysql：用于存储数据库管理者的用户信息、权限信息以及一些日志信息等；
- sys：相当于是一个简易版的 performance_schema，将性能数据库中的数据汇总成更容易理解的形式；

## 环境搭建

(MySQL 下载)[https://dev.mysql.com/downloads/mysql/]

## 终端操作数据库

### 登录

`mysql -u用户名 -p密码`

### 数据库操作

- 显示数据库：`show databases;`
- 创建数据库：`create database 数据库名;`
- 选择数据库：`use 数据库名;`

### 数据表操作

- 创建表：`create table 表名(字段名 数据类型,字段名 数据类型);`
- 插入数据：`insert into 表名(字段名,字段名) values (值,值);`

## SQL 语句

我们希望操作数据库（特别是在程序中），就需要有和数据库沟通的语言，这个语言就是 SQL：

- SQL 是 Structured Query Language，称之为结构化查询语言，简称 SQL；
- 使用 SQL 编写出来的语句，就称之为 SQL 语句；
- SQL 语句可以用于对数据库进行操作；

### SQL 语句的分类

- DDL（Data Definition Language）：数据定义语言；
  - 可以通过 DDL 语句对数据库或者表进行：创建、删除、修改等操作；
- DML（Data Manipulation Language）：数据操作语言；
  - 可以通过 DML 语句对表进行：添加、删除、修改等操作；
- DQL（Data Query Language）：数据查询语言；
  - 可以通过 DQL 从数据库中查询记录；（重点）
- DCL（Data Control Language）：数据控制语言；
  - 对数据库、表格的权限进行相关访问控制操作；

### SQL 语句的常用规范

- 通常关键字是大写的，比如 CREATE、TABLE、SHOW 等等；
- 一条语句结束后，需要以 ; 结尾；
- 如果遇到关键字作为表明或者字段名称，可以使用``包裹;

### 数据库操作

- 创建数据库

  - 直接创建：`CREATE DATABASE 数据库名`
  - 如果表不存在时则创建：`CREATE DATABASE IF NOT EXISTS 数据库名`

- 删除数据库：`DROP DATABASE IF EXISTS 数据库名;`
- 修改数据库编码：`ALTER DATABASE 数据库名 CHARACTER SET = utf8 COLLATE = utf8_unicode_ci`

### 数据表的操作

- 创建表：`` CREATE TABLE IF NOT EXISTS`表名`(`字段名` 数据类型,`字段名`数据类型); ``
- 删除表：`` DROP TABLE IF EXISTS`表名`; ``
