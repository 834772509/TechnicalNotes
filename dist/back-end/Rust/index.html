<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rust 基础 | 杉-技术笔记</title>
    <meta name="description" content="记录工作和学习过程中的笔记">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/technicalnotes/img/LOGO.ico">
    
    <link rel="preload" href="/technicalnotes/assets/css/0.styles.d6b9af32.css" as="style"><link rel="preload" href="/technicalnotes/assets/js/app.80cddeaf.js" as="script"><link rel="preload" href="/technicalnotes/assets/js/2.5e6c87b1.js" as="script"><link rel="preload" href="/technicalnotes/assets/js/68.18494a8c.js" as="script"><link rel="preload" href="/technicalnotes/assets/js/8.6058cd07.js" as="script"><link rel="prefetch" href="/technicalnotes/assets/js/10.f5e8cf4c.js"><link rel="prefetch" href="/technicalnotes/assets/js/100.15145c71.js"><link rel="prefetch" href="/technicalnotes/assets/js/101.f31753a5.js"><link rel="prefetch" href="/technicalnotes/assets/js/102.bb85b77c.js"><link rel="prefetch" href="/technicalnotes/assets/js/103.5bc68595.js"><link rel="prefetch" href="/technicalnotes/assets/js/104.215fc5fb.js"><link rel="prefetch" href="/technicalnotes/assets/js/105.1ca80458.js"><link rel="prefetch" href="/technicalnotes/assets/js/106.ca5de89c.js"><link rel="prefetch" href="/technicalnotes/assets/js/107.946249e0.js"><link rel="prefetch" href="/technicalnotes/assets/js/108.9c68e7c1.js"><link rel="prefetch" href="/technicalnotes/assets/js/109.f67876fa.js"><link rel="prefetch" href="/technicalnotes/assets/js/11.ce9d8ba6.js"><link rel="prefetch" href="/technicalnotes/assets/js/110.2030fa2c.js"><link rel="prefetch" href="/technicalnotes/assets/js/111.17034474.js"><link rel="prefetch" href="/technicalnotes/assets/js/112.676a1c18.js"><link rel="prefetch" href="/technicalnotes/assets/js/113.d969fd13.js"><link rel="prefetch" href="/technicalnotes/assets/js/114.247ea245.js"><link rel="prefetch" href="/technicalnotes/assets/js/115.9eac8e58.js"><link rel="prefetch" href="/technicalnotes/assets/js/116.e5d65241.js"><link rel="prefetch" href="/technicalnotes/assets/js/117.26c247e3.js"><link rel="prefetch" href="/technicalnotes/assets/js/118.cba10b01.js"><link rel="prefetch" href="/technicalnotes/assets/js/119.f9f921d5.js"><link rel="prefetch" href="/technicalnotes/assets/js/12.c37a2dcb.js"><link rel="prefetch" href="/technicalnotes/assets/js/120.37745c12.js"><link rel="prefetch" href="/technicalnotes/assets/js/121.80d39b4b.js"><link rel="prefetch" href="/technicalnotes/assets/js/13.ab0524b8.js"><link rel="prefetch" href="/technicalnotes/assets/js/14.d92b5706.js"><link rel="prefetch" href="/technicalnotes/assets/js/15.2d35b984.js"><link rel="prefetch" href="/technicalnotes/assets/js/16.816dd94f.js"><link rel="prefetch" href="/technicalnotes/assets/js/17.100bf7b8.js"><link rel="prefetch" href="/technicalnotes/assets/js/18.40389d36.js"><link rel="prefetch" href="/technicalnotes/assets/js/19.8a0e06a2.js"><link rel="prefetch" href="/technicalnotes/assets/js/20.151ff977.js"><link rel="prefetch" href="/technicalnotes/assets/js/21.e7ede1bf.js"><link rel="prefetch" href="/technicalnotes/assets/js/22.068c3701.js"><link rel="prefetch" href="/technicalnotes/assets/js/23.5c878f9e.js"><link rel="prefetch" href="/technicalnotes/assets/js/24.ae5a6428.js"><link rel="prefetch" href="/technicalnotes/assets/js/25.809b3776.js"><link rel="prefetch" href="/technicalnotes/assets/js/26.9846e8e7.js"><link rel="prefetch" href="/technicalnotes/assets/js/27.c680086c.js"><link rel="prefetch" href="/technicalnotes/assets/js/28.3d3d4536.js"><link rel="prefetch" href="/technicalnotes/assets/js/29.b5be4867.js"><link rel="prefetch" href="/technicalnotes/assets/js/3.000c6d26.js"><link rel="prefetch" href="/technicalnotes/assets/js/30.21c28835.js"><link rel="prefetch" href="/technicalnotes/assets/js/31.01f49fad.js"><link rel="prefetch" href="/technicalnotes/assets/js/32.a6e753d3.js"><link rel="prefetch" href="/technicalnotes/assets/js/33.297d1f91.js"><link rel="prefetch" href="/technicalnotes/assets/js/34.35feed21.js"><link rel="prefetch" href="/technicalnotes/assets/js/35.ba6d6c88.js"><link rel="prefetch" href="/technicalnotes/assets/js/36.ce161d94.js"><link rel="prefetch" href="/technicalnotes/assets/js/37.d3cef34c.js"><link rel="prefetch" href="/technicalnotes/assets/js/38.1ac61226.js"><link rel="prefetch" href="/technicalnotes/assets/js/39.5531a171.js"><link rel="prefetch" href="/technicalnotes/assets/js/4.8c2353d8.js"><link rel="prefetch" href="/technicalnotes/assets/js/40.644c75d9.js"><link rel="prefetch" href="/technicalnotes/assets/js/41.1975ee00.js"><link rel="prefetch" href="/technicalnotes/assets/js/42.2a2ecb07.js"><link rel="prefetch" href="/technicalnotes/assets/js/43.dddebc5b.js"><link rel="prefetch" href="/technicalnotes/assets/js/44.aa7b31dd.js"><link rel="prefetch" href="/technicalnotes/assets/js/45.5115a6f2.js"><link rel="prefetch" href="/technicalnotes/assets/js/46.df4e6aad.js"><link rel="prefetch" href="/technicalnotes/assets/js/47.89bac556.js"><link rel="prefetch" href="/technicalnotes/assets/js/48.af95205f.js"><link rel="prefetch" href="/technicalnotes/assets/js/49.e6759b41.js"><link rel="prefetch" href="/technicalnotes/assets/js/5.c82c06c7.js"><link rel="prefetch" href="/technicalnotes/assets/js/50.144368f3.js"><link rel="prefetch" href="/technicalnotes/assets/js/51.897bdc6a.js"><link rel="prefetch" href="/technicalnotes/assets/js/52.49d10121.js"><link rel="prefetch" href="/technicalnotes/assets/js/53.f33609ed.js"><link rel="prefetch" href="/technicalnotes/assets/js/54.87830222.js"><link rel="prefetch" href="/technicalnotes/assets/js/55.390b4178.js"><link rel="prefetch" href="/technicalnotes/assets/js/56.13460435.js"><link rel="prefetch" href="/technicalnotes/assets/js/57.91c080f1.js"><link rel="prefetch" href="/technicalnotes/assets/js/58.da624a3e.js"><link rel="prefetch" href="/technicalnotes/assets/js/59.6caa8f99.js"><link rel="prefetch" href="/technicalnotes/assets/js/6.92f7363d.js"><link rel="prefetch" href="/technicalnotes/assets/js/60.f3ff4a3d.js"><link rel="prefetch" href="/technicalnotes/assets/js/61.aea37338.js"><link rel="prefetch" href="/technicalnotes/assets/js/62.9ae02808.js"><link rel="prefetch" href="/technicalnotes/assets/js/63.485bcd93.js"><link rel="prefetch" href="/technicalnotes/assets/js/64.cfe77886.js"><link rel="prefetch" href="/technicalnotes/assets/js/65.ca7b5004.js"><link rel="prefetch" href="/technicalnotes/assets/js/66.41a2d766.js"><link rel="prefetch" href="/technicalnotes/assets/js/67.6862d36d.js"><link rel="prefetch" href="/technicalnotes/assets/js/69.7e220117.js"><link rel="prefetch" href="/technicalnotes/assets/js/7.215eacf3.js"><link rel="prefetch" href="/technicalnotes/assets/js/70.d4393945.js"><link rel="prefetch" href="/technicalnotes/assets/js/71.7cbf3172.js"><link rel="prefetch" href="/technicalnotes/assets/js/72.b160ff5d.js"><link rel="prefetch" href="/technicalnotes/assets/js/73.97d3d12b.js"><link rel="prefetch" href="/technicalnotes/assets/js/74.86f02d6b.js"><link rel="prefetch" href="/technicalnotes/assets/js/75.547eab18.js"><link rel="prefetch" href="/technicalnotes/assets/js/76.c0bd0c4a.js"><link rel="prefetch" href="/technicalnotes/assets/js/77.5c5f3e5a.js"><link rel="prefetch" href="/technicalnotes/assets/js/78.43867331.js"><link rel="prefetch" href="/technicalnotes/assets/js/79.bff2330e.js"><link rel="prefetch" href="/technicalnotes/assets/js/80.738d736d.js"><link rel="prefetch" href="/technicalnotes/assets/js/81.3c22a842.js"><link rel="prefetch" href="/technicalnotes/assets/js/82.c475fa5b.js"><link rel="prefetch" href="/technicalnotes/assets/js/83.b4626af8.js"><link rel="prefetch" href="/technicalnotes/assets/js/84.65b47c7f.js"><link rel="prefetch" href="/technicalnotes/assets/js/85.b3363735.js"><link rel="prefetch" href="/technicalnotes/assets/js/86.85c09aad.js"><link rel="prefetch" href="/technicalnotes/assets/js/87.4f75eaed.js"><link rel="prefetch" href="/technicalnotes/assets/js/88.be81f5df.js"><link rel="prefetch" href="/technicalnotes/assets/js/89.6c5c698d.js"><link rel="prefetch" href="/technicalnotes/assets/js/9.c28e44e3.js"><link rel="prefetch" href="/technicalnotes/assets/js/90.758b5f3f.js"><link rel="prefetch" href="/technicalnotes/assets/js/91.9ee813e1.js"><link rel="prefetch" href="/technicalnotes/assets/js/92.ad1a3e5d.js"><link rel="prefetch" href="/technicalnotes/assets/js/93.89e57e1f.js"><link rel="prefetch" href="/technicalnotes/assets/js/94.0ddb8446.js"><link rel="prefetch" href="/technicalnotes/assets/js/95.5c64d985.js"><link rel="prefetch" href="/technicalnotes/assets/js/96.ba5b384e.js"><link rel="prefetch" href="/technicalnotes/assets/js/97.1e6eda2a.js"><link rel="prefetch" href="/technicalnotes/assets/js/98.e8a2de8e.js"><link rel="prefetch" href="/technicalnotes/assets/js/99.6d2af9f7.js">
    <link rel="stylesheet" href="/technicalnotes/assets/css/0.styles.d6b9af32.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><main><main slot="sidebar-top"><!----></main> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/technicalnotes/" class="home-link router-link-active"><!----> <span class="site-name">杉-技术笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/technicalnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Web 开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/CSS3/" class="nav-link">
  CSS3
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/WechatApplet/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          移动端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Andorid/" class="nav-link">
  Andorid
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Flutter/" class="nav-link">
  Flutter
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/" class="nav-link">
  Java 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/JavaWeb/" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/Mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/Spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/SpringMVC/" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          Rust
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Rust/" class="nav-link router-link-exact-active router-link-active">
  Rust
</a></li></ul></li><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Node.js/" class="nav-link">
  Node.js
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Python/" class="nav-link">
  Python 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Python/Flask/" class="nav-link">
  Flask
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/DataBase/MySQL/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          PHP
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/PHP/" class="nav-link">
  PHP 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/PHP/ThinkPHP/" class="nav-link">
  ThinkPHP
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/Photoshop/" class="nav-link">
  Photoshop
</a></li><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/WinPE/" class="nav-link">
  WinPE
</a></li></ul></div></div><div class="nav-item"><a href="https://firpe.cn/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://firpe.cn/donate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  投食 
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/technicalnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Web 开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/CSS3/" class="nav-link">
  CSS3
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          前端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/WechatApplet/" class="nav-link">
  微信小程序
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          移动端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Andorid/" class="nav-link">
  Andorid
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/front-end/Flutter/" class="nav-link">
  Flutter
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/" class="nav-link">
  Java 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/JavaWeb/" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/Mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/Spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/SpringMVC/" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/SpringBoot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Java/JVM/" class="nav-link">
  JVM
</a></li></ul></li><li class="dropdown-item"><h4>
          Rust
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Rust/" class="nav-link router-link-exact-active router-link-active">
  Rust
</a></li></ul></li><li class="dropdown-item"><h4>
          Node.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Node.js/" class="nav-link">
  Node.js
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Python/" class="nav-link">
  Python 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/Python/Flask/" class="nav-link">
  Flask
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/DataBase/MySQL/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          PHP
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/technicalnotes/back-end/PHP/" class="nav-link">
  PHP 基础
</a></li><li class="dropdown-subitem"><a href="/technicalnotes/back-end/PHP/ThinkPHP/" class="nav-link">
  ThinkPHP
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/Photoshop/" class="nav-link">
  Photoshop
</a></li><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/technicalnotes/Other/WinPE/" class="nav-link">
  WinPE
</a></li></ul></div></div><div class="nav-item"><a href="https://firpe.cn/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://firpe.cn/donate" target="_blank" rel="noopener noreferrer" class="nav-link external">
  投食 
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Rust</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technicalnotes/back-end/Rust/Clap.html" class="sidebar-link">Clap</a></li><li><a href="/technicalnotes/back-end/Rust/" class="active sidebar-link">Rust 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#环境搭建" class="sidebar-link">环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#安装-c-生成工具" class="sidebar-link">安装 C++生成工具</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#配置国内镜像" class="sidebar-link">配置国内镜像</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#安装-rust" class="sidebar-link">安装 Rust</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#集成开发环境插件" class="sidebar-link">集成开发环境插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#cargo" class="sidebar-link">cargo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#脚手架" class="sidebar-link">脚手架</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#rustup" class="sidebar-link">Rustup</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#编译-32-位程序" class="sidebar-link">编译 32 位程序</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#优化编译体积" class="sidebar-link">优化编译体积</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#增加文件版本信息" class="sidebar-link">增加文件版本信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#基本语法" class="sidebar-link">基本语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#数据类型转换" class="sidebar-link">数据类型转换</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#类型别名" class="sidebar-link">类型别名</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义变量" class="sidebar-link">定义变量</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义常量" class="sidebar-link">定义常量</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义全局变量" class="sidebar-link">定义全局变量</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#逻辑运算符" class="sidebar-link">逻辑运算符</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#关系运算符" class="sidebar-link">关系运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#传参" class="sidebar-link">传参</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#函数体" class="sidebar-link">函数体</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#所有权" class="sidebar-link">所有权</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#什么是所有权" class="sidebar-link">什么是所有权</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#栈内存与堆内存" class="sidebar-link">栈内存与堆内存</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#所有权规则" class="sidebar-link">所有权规则</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#内存和分配" class="sidebar-link">内存和分配</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#所有权与函数" class="sidebar-link">所有权与函数</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#返回值与作用域" class="sidebar-link">返回值与作用域</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#引用" class="sidebar-link">引用</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#控制流" class="sidebar-link">控制流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#if-else" class="sidebar-link">if-else</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#loop-循环" class="sidebar-link">loop 循环</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#while-循环" class="sidebar-link">while 循环</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#for-循环" class="sidebar-link">for 循环</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#match-匹配" class="sidebar-link">match 匹配</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#if-let-匹配" class="sidebar-link">if let 匹配</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#string-字符串" class="sidebar-link">String 字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#创建" class="sidebar-link">创建</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#追加字符串" class="sidebar-link">追加字符串</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#追加字符" class="sidebar-link">追加字符</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#连接字符串" class="sidebar-link">连接字符串</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#拼接字符串（不推荐）" class="sidebar-link">拼接字符串（不推荐）</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#遍历字符串" class="sidebar-link">遍历字符串</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#字符串切片" class="sidebar-link">字符串切片</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#获取字符串长度" class="sidebar-link">获取字符串长度</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#判断字符串是否存在指定内容" class="sidebar-link">判断字符串是否存在指定内容</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#转小写" class="sidebar-link">转小写</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#转大写" class="sidebar-link">转大写</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#数组" class="sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-2" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#访问元素" class="sidebar-link">访问元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#遍历数组" class="sidebar-link">遍历数组</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#取数组长度" class="sidebar-link">取数组长度</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#元组（tuple）" class="sidebar-link">元组（Tuple）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-3" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#访问元素-2" class="sidebar-link">访问元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#元组的结构" class="sidebar-link">元组的结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#动态数组（vector）" class="sidebar-link">动态数组（Vector）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-4" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#增加元素" class="sidebar-link">增加元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#修改元素" class="sidebar-link">修改元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#删除元素" class="sidebar-link">删除元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#访问元素-3" class="sidebar-link">访问元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#遍历元素" class="sidebar-link">遍历元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#hashmap" class="sidebar-link">HashMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#创建-2" class="sidebar-link">创建</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#增加元素-2" class="sidebar-link">增加元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#读取元素" class="sidebar-link">读取元素</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#遍历元素-2" class="sidebar-link">遍历元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#结构体（struct）" class="sidebar-link">结构体（Struct）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-5" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义方法" class="sidebar-link">定义方法</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#更新语法" class="sidebar-link">更新语法</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#元组结构体（tuple-struct）" class="sidebar-link">元组结构体（Tuple Struct）</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#unit-like-struct" class="sidebar-link">Unit-Like Struct</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#打印结构体" class="sidebar-link">打印结构体</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#枚举（enum）" class="sidebar-link">枚举（Enum）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-6" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义方法-2" class="sidebar-link">定义方法</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用-2" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#option-枚举" class="sidebar-link">Option 枚举</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#错误" class="sidebar-link">错误</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#可恢复错误" class="sidebar-link">可恢复错误</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#不可恢复错误" class="sidebar-link">不可恢复错误</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#单元包-crate" class="sidebar-link">单元包 (Crate)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#声明" class="sidebar-link">声明</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用-3" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#拆分模块" class="sidebar-link">拆分模块</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用第三方库" class="sidebar-link">使用第三方库</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#泛型" class="sidebar-link">泛型</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#trait" class="sidebar-link">Trait</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#定义-7" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用-4" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用-trait-作为参数" class="sidebar-link">使用 Trait 作为参数</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#使用-trait-作为返回类型" class="sidebar-link">使用 Trait 作为返回类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#环境变量" class="sidebar-link">环境变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#访问环境变量" class="sidebar-link">访问环境变量</a></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#遍历环境变量" class="sidebar-link">遍历环境变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#json" class="sidebar-link">Json</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technicalnotes/back-end/Rust/#安装依赖" class="sidebar-link">安装依赖</a></li></ul></li></ul></li><li><a href="/technicalnotes/back-end/Rust/Rust-embed.html" class="sidebar-link">内置资源</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rust-基础"><a href="#rust-基础" class="header-anchor">#</a> Rust 基础</h1> <p><a href="https://kaisery.github.io/trpl-zh-cn/" target="_blank" rel="noopener noreferrer">Rust 程序设计语言 简体中文版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://rust-cookbook.budshome.com" target="_blank" rel="noopener noreferrer">Rust 实例指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://rust-guide.budshome.com/" target="_blank" rel="noopener noreferrer">Rust 实践指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://crates.io/" target="_blank" rel="noopener noreferrer">Crates 库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <h3 id="安装-c-生成工具"><a href="#安装-c-生成工具" class="header-anchor">#</a> 安装 C++生成工具</h3> <p><a href="https://download.microsoft.com/download/5/f/7/5f7acaeb-8363-451f-9425-68a90f98b238/visualcppbuildtools_full.exe" target="_blank" rel="noopener noreferrer">VisualCpp Build Tools 在线安装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>仅安装 Microsoft C++ build tools 即可，<code>Windows10 SDK</code>可在以后需要时安装（建议也一并安装）。</p></div> <h3 id="配置国内镜像"><a href="#配置国内镜像" class="header-anchor">#</a> 配置国内镜像</h3> <ol><li><p>设置环境变量</p> <ul><li><code>RUSTUP_DIST_SERVER</code>: <code>https://mirrors.ustc.edu.cn/rust-static</code></li> <li><code>RUSTUP_UPDATE_ROOT</code>: <code>https://mirrors.ustc.edu.cn/rust-static/rustup</code></li></ul></li> <li><p>创建 <code>C:\users\用户名\.cargo\config</code>文件</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>编码为 UTF-8</p></div> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[source.crates-io]</span>
<span class="token comment"># 默认中国科学技术大学，可根据实际情况进行修改</span>
<span class="token constant">replace-with</span> <span class="token attr-value"><span class="token punctuation">=</span> 'ustc'</span>

<span class="token comment"># 中国科学技术大学</span>
<span class="token selector">[source.ustc]</span>
<span class="token constant">registry</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;</span>

<span class="token comment"># 清华大学</span>
<span class="token selector">[source.tuna]</span>
<span class="token constant">registry</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git&quot;</span>

<span class="token comment"># 上海交通大学</span>
<span class="token selector">[source.sjtu]</span>
<span class="token constant">registry</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index&quot;</span>

<span class="token comment"># rustcc社区</span>
<span class="token selector">[source.crates-io-cn]</span>
<span class="token constant">registry</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;https://crates-io.cn/crates.io-index&quot;</span>

<span class="token selector">[http]</span>
<span class="token constant">check-revoke</span> <span class="token attr-value"><span class="token punctuation">=</span> false</span>
</code></pre></div></li></ol> <h3 id="安装-rust"><a href="#安装-rust" class="header-anchor">#</a> 安装 Rust</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>默认为在线安装 Rust，需要先在环境变量内配置国内镜像才可进行正常下载</p></div> <p>自定义安装路径（设置环境变量）：</p> <ul><li><code>CARGO_HOME</code>: <code>D:\Program Files\Rust\.cargo</code></li> <li><code>RUSTUP_HOME</code>: <code>D:\Program Files\Rust\.rustup</code></li></ul> <p><a href="https://www.rust-lang.org/zh-CN/tools/install" target="_blank" rel="noopener noreferrer">使用 Rustup 安装 Rsut<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="集成开发环境插件"><a href="#集成开发环境插件" class="header-anchor">#</a> 集成开发环境插件</h3> <ul><li>IDEA: <code>Rust</code></li> <li>Visual Studio Code: <code>Rust</code></li></ul> <h2 id="cargo"><a href="#cargo" class="header-anchor">#</a> cargo</h2> <h3 id="脚手架"><a href="#脚手架" class="header-anchor">#</a> 脚手架</h3> <ul><li>创建项目: <code>cargo new 项目名</code></li> <li>启动项目: <code>cargo run</code></li> <li>语法检查: <code>cargo check</code></li> <li>自动修复: <code>cargo fix</code></li> <li>编译项目: <code>cargo build --release</code></li></ul> <h3 id="rustup"><a href="#rustup" class="header-anchor">#</a> Rustup</h3> <ul><li>查看 Rust 版本: <code>rustup --version</code></li> <li>升级 Rust: <code>rustup update</code></li> <li>卸载 Rust: <code>rustup self uninstall</code></li></ul> <h3 id="编译-32-位程序"><a href="#编译-32-位程序" class="header-anchor">#</a> 编译 32 位程序</h3> <ol><li>添加<code>i686-pc-windows-msvc</code>target: <code>rustup target add i686-pc-windows-msvc</code></li> <li>编译 32 位程序: <code>cargo build --release --target=i686-pc-windows-msvc</code></li></ol> <h3 id="优化编译体积"><a href="#优化编译体积" class="header-anchor">#</a> 优化编译体积</h3> <p>Cargo.toml</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[profile.release]</span>
<span class="token comment"># 调整优化等级。默认的 release 优化等级为 3，这个等级下编译器会进行循环展开之类的操作以体积膨胀为代价提高程序运行速度</span>
<span class="token constant">opt-level</span> <span class="token attr-value"><span class="token punctuation">=</span> 'z'</span>
<span class="token comment"># 开启 LTO（链接时优化）。可以消除大量冗余代码，减小二进制体积，代价是更长的链接时间</span>
<span class="token constant">lto</span> <span class="token attr-value"><span class="token punctuation">=</span> true</span>
<span class="token comment"># 调整并行代码生成单元数量。默认会启用 16 个并行代码生成单元，对编译速度有提升，但是会妨碍某些优化的进行</span>
<span class="token constant">codegen-units</span> <span class="token attr-value"><span class="token punctuation">=</span> 1</span>
<span class="token comment"># Panic 时立刻终止。禁用生成栈回溯，注意：此选项会对程序的行为产生影响</span>
<span class="token constant">panic</span> <span class="token attr-value"><span class="token punctuation">=</span> 'abort'</span>
</code></pre></div><h3 id="增加文件版本信息"><a href="#增加文件版本信息" class="header-anchor">#</a> 增加文件版本信息</h3> <p><a href="https://docs.microsoft.com/zh-cn/windows/win32/menurc/versioninfo-resource?redirectedfrom=MSDN" target="_blank" rel="noopener noreferrer">VersionInfo 资源<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><p>Cargo.toml</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[package]</span>
<span class="token constant">build</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;build.rs&quot;</span>

<span class="token selector">[build-dependencies]</span>
<span class="token constant">embed-resource</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;1.4&quot;</span>
</code></pre></div></li> <li><p>\build.rs</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">extern</span> <span class="token keyword">crate</span> embed_resource<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  embed_resource<span class="token punctuation">::</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;./resource/resource.rc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>新建<code>\resource</code>目录，将图标命名为<code>icon.ico</code>并放置于此</p></li> <li><p>\resource\resource.rc</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>resource.rc</code>需为 GBK 编码，否则将导致编译后的版本信息乱码</p></div> <details class="custom-block details"><summary>点击查看代码</summary> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* 图标信息 */</span>
<span class="token macro property">#<span class="token directive keyword">define</span> IDI_ICON 0x101</span>
IDI_ICON ICON <span class="token string">&quot;icon.ico&quot;</span>

<span class="token comment">/* 文件信息 */</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_COMPANYNAME_STR           &quot;公司名\0&quot;</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_FILEDESCRIPTION_STR       &quot;文件描述\0&quot;</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_INTERNALNAME_STR          &quot;内部名称\0&quot;</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_LEGALCOPYRIGHT_STR        &quot;版权\0&quot;</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_ORIGINALFILENAME_STR      &quot;原始文件名.exe\0&quot;</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_PRODUCTNAME_STR           &quot;产品名称\0&quot;</span>

<span class="token comment">/* 文件版本 */</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_FILEVERSION               1,0,0,0</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_FILEVERSION_STR           &quot;1.0.0.0\0&quot;</span>

<span class="token comment">/* 产品版本 */</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_PRODUCTVERSION            1,0,0,0</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VER_PRODUCTVERSION_STR        &quot;1.0.0.0\0&quot;</span>

<span class="token number">1</span> VERSIONINFO
FILEVERSION     VER_FILEVERSION
PRODUCTVERSION  VER_PRODUCTVERSION
BEGIN
    BLOCK <span class="token string">&quot;StringFileInfo&quot;</span>
    BEGIN
        BLOCK <span class="token string">&quot;040904E4&quot;</span>
        BEGIN
            VALUE <span class="token string">&quot;CompanyName&quot;</span><span class="token punctuation">,</span>      VER_COMPANYNAME_STR
            VALUE <span class="token string">&quot;FileDescription&quot;</span><span class="token punctuation">,</span>  VER_FILEDESCRIPTION_STR
            VALUE <span class="token string">&quot;FileVersion&quot;</span><span class="token punctuation">,</span>      VER_FILEVERSION_STR
            VALUE <span class="token string">&quot;InternalName&quot;</span><span class="token punctuation">,</span>     VER_INTERNALNAME_STR
            VALUE <span class="token string">&quot;LegalCopyright&quot;</span><span class="token punctuation">,</span>   VER_LEGALCOPYRIGHT_STR
            VALUE <span class="token string">&quot;OriginalFilename&quot;</span><span class="token punctuation">,</span> VER_ORIGINALFILENAME_STR
            VALUE <span class="token string">&quot;ProductName&quot;</span><span class="token punctuation">,</span>      VER_PRODUCTNAME_STR
            VALUE <span class="token string">&quot;ProductVersion&quot;</span><span class="token punctuation">,</span>   VER_PRODUCTVERSION_STR
        END
    END
    BLOCK <span class="token string">&quot;VarFileInfo&quot;</span>
    BEGIN
        VALUE <span class="token string">&quot;Translation&quot;</span><span class="token punctuation">,</span> <span class="token number">0x409</span><span class="token punctuation">,</span> <span class="token number">1252</span>
    END
END
</code></pre></div></details></li></ul> <h2 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h2> <h3 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h3> <ul><li><p>字符型（32 位）: <code>char</code></p> <p>char 类型被用来描述语言中最基础的单个字符</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>因为 char 类型目的是描述任意一个 unicode 字符，所以它的内存空间是<strong>4 个字节</strong>而不是 1 个字节</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> c <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>数字型</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>以一个大小为 8 bits 的数据举例，无符号的表达范围是：[0,255]，有符号的表达范围是：[-128,127]</p></div> <ul><li>有符号
<code>i8</code> : 8 位，表达范围是：[-128,127]<br> <code>i16</code> : 16 位，表达范围是：[-32768,32767]<br> <code>i32</code> : 32 位，表达范围是：[-2147483648,2147483647]<br> <code>i64</code> : 64 位，表达范围是：[-9223372036854775808,9223372036854775807]</li> <li>无符号
<code>u8</code> : 8 位，表达范围是：[0,255]<br> <code>u16</code> : 16 位，表达范围是：[0,65535]<br> <code>u32</code> : 32 位，表达范围是：[0,4294967295]<br> <code>u64</code> : 64 位，表达范围是：[0,18446744073709551615]</li></ul></li> <li><p>浮点型
<code>f32</code> : 32 位
<code>f64</code> : 64 位</p></li> <li><p>字符串: <code>String</code></p></li> <li><p>布尔型 : <code>bool</code></p></li> <li><p>自适应类型(长度随着平台的不同而不同)</p> <ul><li>有符号: <code>isize</code></li> <li>无符号: <code>usize</code></li></ul></li></ul> <h3 id="数据类型转换"><a href="#数据类型转换" class="header-anchor">#</a> 数据类型转换</h3> <ul><li><p>强制类型转换</p> <p>它只能用于原始类型(i32 、i64 、f32 、f64 、 u8 、 u32 、 char 等类型)，并且它是安全的</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> number1<span class="token punctuation">:</span> i8 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> number2 <span class="token operator">=</span> number1 <span class="token keyword">as</span> i32<span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;number2={}&quot;</span><span class="token punctuation">,</span> number2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>转换字符串</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> var1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> var2 <span class="token operator">=</span> var1<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;var2={}&quot;</span><span class="token punctuation">,</span> var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="类型别名"><a href="#类型别名" class="header-anchor">#</a> 类型别名</h3> <p>类型别名用于给一个数据类型起别名</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">type</span> 类型别名 <span class="token operator">=</span> 数据类型<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> 变量名<span class="token punctuation">:</span> 类型别名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="定义变量"><a href="#定义变量" class="header-anchor">#</a> 定义变量</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果变量没有<code>mut</code>关键字，则数据不可变</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 自动推导类型</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> 变量名<span class="token punctuation">;</span>

<span class="token comment">// 指定数据类型</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> 变量名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">;</span>
</code></pre></div><p>Rust 具有隐藏性。可以声明相同名字的变量，新的变量会隐藏之前声明的同名变量。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>使用 let 声明的同名新变量，类型可以与之前不同</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x<span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="定义常量"><a href="#定义常量" class="header-anchor">#</a> 定义常量</h3> <p>常量的类型必须标注。命名规范为全大写字母，每个单词之间用下划线分开。</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> 变量名<span class="token punctuation">:</span> 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre></div><div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> MAX_POINTS<span class="token punctuation">:</span> u32 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="定义全局变量"><a href="#定义全局变量" class="header-anchor">#</a> 定义全局变量</h3> <p>静态变量的声明周期是整个程序，从启动到退出，它占用的内存空间不会在执行过程中回收。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>全局变量必须在声明时立即初始化，并且需要指定数据类型</li> <li>全局变量的初始化必须是编译期可确定的常量，不能包括执行期才能确定的表达式、语句和函数调用</li> <li>带有<code>mut</code>修饰的全局变量，在使用时必须使用<code>unsafe</code></li></ul></div> <ul><li><p>不可变全局变量</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">static</span> 变量名<span class="token punctuation">:</span> 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>可变全局变量</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">static</span> <span class="token keyword">mut</span> 变量名<span class="token punctuation">:</span> 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token comment">// 改变值</span>
<span class="token keyword">unsafe</span> <span class="token punctuation">{</span> 变量名 <span class="token operator">=</span> 值<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token comment">// 读取值</span>
<span class="token keyword">unsafe</span> <span class="token punctuation">{</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 变量名<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h3> <ul><li>与: <code>&amp;&amp;</code></li> <li>或: <code>||</code></li> <li>取反: <code>!</code></li></ul> <h3 id="关系运算符"><a href="#关系运算符" class="header-anchor">#</a> 关系运算符</h3> <ul><li>等于: ==</li> <li>不等于: !=</li> <li>大于: &gt;</li> <li>小于: &lt;</li> <li>小于等于: &gt;=</li> <li>大于等于: &lt;=</li></ul> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> 返回值类型 <span class="token punctuation">{</span>
  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 返回表达式（返回值后面不能加;）</span>
<span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> 返回值类型 <span class="token punctuation">{</span>
  返回值
<span class="token punctuation">}</span>
</code></pre></div><h3 id="传参"><a href="#传参" class="header-anchor">#</a> 传参</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li><strong>必须声明每个参数的类型</strong></li> <li><code>&amp;</code>表示指向值的引用（没有这个值的所有权）</li></ul></div> <ul><li><p>声明</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span>参数名<span class="token punctuation">:</span> 参数类型<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;参数名={}&quot;</span><span class="token punctuation">,</span> 参数名<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span>参数名<span class="token punctuation">:</span> <span class="token operator">&amp;</span>参数类型<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> 返回值类型 <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;参数名={}&quot;</span><span class="token punctuation">,</span> 参数名<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>使用</p> <div class="language-rust extra-class"><pre class="language-rust"><code>函数名<span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">;</span>
函数名<span class="token punctuation">(</span><span class="token operator">&amp;</span>参数<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="函数体"><a href="#函数体" class="header-anchor">#</a> 函数体</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>函数体只能使用返回表达式，不可使用<code>return</code>关键字</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 变量名 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  x <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="所有权"><a href="#所有权" class="header-anchor">#</a> 所有权</h2> <h3 id="什么是所有权"><a href="#什么是所有权" class="header-anchor">#</a> 什么是所有权</h3> <p>所有运行的程序都必须管理其使用计算机内存的方式。</p> <ul><li>一些语言中具有垃圾回收机制，在程序运行时不断地寻找不再使用的内存；</li> <li>在另一些语言中，程序员必须亲自分配和释放内存。</li></ul> <p>Rust 则选择了第三种方式：</p> <ul><li>通过所有权系统管理内存，编译器在编译时会根据一系列的规则进行检查。</li> <li>在运行时，所有权系统的任何功能都不会减慢程序。</li></ul> <h3 id="栈内存与堆内存"><a href="#栈内存与堆内存" class="header-anchor">#</a> 栈内存与堆内存</h3> <ol><li><p>栈内存(Stack)
按值的接受顺序来存储，按相反的顺序将它们移除（先进后出）。</p> <ul><li><p>所有存储在栈上的数据必须拥有已知的固定大小；</p></li> <li><p>编译时大小未知的数据或运行时大小可能发生变化的数据必须保持到栈内存。</p></li> <li><p>增加数据叫“压入栈”</p></li> <li><p>删除数据叫“弹出栈”</p></li></ul></li> <li><p>堆内存(Heap)
操作系统首先需要找到一个足够大的空间来存放数据，做好记录方便下次分配</p></li></ol> <h3 id="所有权规则"><a href="#所有权规则" class="header-anchor">#</a> 所有权规则</h3> <ol><li>每个值都有一个变量，这个变量是该值的所有者。</li> <li>每个值同时只能有一个所有者。</li> <li>当所有者超出作用域(scope)时，该值将被删除。</li></ol> <h3 id="内存和分配"><a href="#内存和分配" class="header-anchor">#</a> 内存和分配</h3> <p>Rust 采用了不同的方式：对于某个值来说，当拥有它的变量走出作用范围时，内存会立即自动的交还给操作系统（调用 drop 函数）。</p> <h3 id="所有权与函数"><a href="#所有权与函数" class="header-anchor">#</a> 所有权与函数</h3> <p>把值传递给函数，会发生移动或复制。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>基础类型会自动进行复制，不需要进行引用</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">take_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> x <span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token function">makes_copy</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;x:{}&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>some_string<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> some_string<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">makes_copy</span><span class="token punctuation">(</span>some_number<span class="token punctuation">:</span> i32<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> some_number<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="返回值与作用域"><a href="#返回值与作用域" class="header-anchor">#</a> 返回值与作用域</h3> <p>函数在返回值的过程中同样也会发生所有权的转移。</p> <p>一个变量的所有权总是遵循同样的模式：</p> <ul><li>把一个值赋给其它变量时就会发生移动</li> <li>当一个包含 heap 数据的变量离开作用域时，它的值就会被 drop 函数清理，除非数据的所有权移动到另-一个变量上了</li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">gives_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> s2 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> s3 <span class="token operator">=</span> <span class="token function">takes_and_gives_back</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">gives_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> String <span class="token punctuation">{</span>
  <span class="token keyword">let</span> some_string <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  some_string
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">takes_and_gives_back</span><span class="token punctuation">(</span>a_string<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> String <span class="token punctuation">{</span>
  a_string
<span class="token punctuation">}</span>
</code></pre></div><h3 id="引用"><a href="#引用" class="header-anchor">#</a> 引用</h3> <p><code>&amp;</code>表示指向值的引用，允许引用某些值而不取得其所有权</p> <ul><li><p>引用的基本使用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token keyword">mut</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token keyword">mut</span> len <span class="token operator">=</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;字符串={}, 长度={}&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">fn</span> <span class="token function">getLength</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>String<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> usize <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>可变引用
当需要改变参数时，需要使用可变引用。<br>
注意：在特定作用域中的特定数据只能有一个可变引用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">change</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">change</span><span class="token punctuation">(</span>some_string<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  some_string<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">&quot;, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="控制流"><a href="#控制流" class="header-anchor">#</a> 控制流</h2> <h3 id="if-else"><a href="#if-else" class="header-anchor">#</a> if-else</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>if 语句后面的条件不接小括号</li> <li>如果使用 if-else 语句作为返回值表达式，一定要加 else 分支，否则默认 else 分支的返回值为()</li></ul></div> <ul><li><p>普通使用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">if</span> 条件 <span class="token punctuation">{</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> 条件 <span class="token punctuation">{</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>结合 let</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> 变量名 <span class="token operator">=</span> <span class="token keyword">if</span> 条件 <span class="token punctuation">{</span>
  返回值
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  返回值
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="loop-循环"><a href="#loop-循环" class="header-anchor">#</a> loop 循环</h3> <p>loop 表示一个无限循环</p> <ul><li><p>普通使用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">loop</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> 条件 <span class="token punctuation">{</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>结合 let</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> 变量名 <span class="token operator">=</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> 条件 <span class="token punctuation">{</span>
    <span class="token keyword">break</span> 值<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="while-循环"><a href="#while-循环" class="header-anchor">#</a> while 循环</h3> <p>while 语句是带条件判断的循环语句。如果条件满足，则持续循环执行结果语句块。</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">while</span> 条件 <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="for-循环"><a href="#for-循环" class="header-anchor">#</a> for 循环</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 数组 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token operator">&amp;</span>数组 <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="match-匹配"><a href="#match-匹配" class="header-anchor">#</a> match 匹配</h3> <p>match 类似 switch 语句，通过关键字匹配</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如无<code>_</code>匹配则 match 匹配必须穷举所有的可能</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">match</span> 值 <span class="token punctuation">{</span>
  值<span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
  值<span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
  值<span class="token number">3</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 其他情况</span>
  _<span class="token operator">=&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="if-let-匹配"><a href="#if-let-匹配" class="header-anchor">#</a> if let 匹配</h3> <p>if let 处理只关心一种匹配而忽略其他匹配的情况。if let 放弃了穷举的可能，可以看作是 match 的语法糖</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">if</span> <span class="token keyword">let</span> 具体值 <span class="token operator">=</span> 匹配值 <span class="token punctuation">{</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="string-字符串"><a href="#string-字符串" class="header-anchor">#</a> String 字符串</h2> <p>出于内存安全的考虑，Rust 将字符串分成两种类型：</p> <ol><li>str 字符串：固定长度，不可改变</li> <li>String 字符串：可变长度，可增长、可修改、可拥有</li></ol> <h3 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> 字符串名 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> 字符串名 <span class="token operator">=</span> <span class="token string">&quot;内容&quot;</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="追加字符串"><a href="#追加字符串" class="header-anchor">#</a> 追加字符串</h3> <p>将一个字符串切片附加到 String</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>可以不使用<code>&amp;</code>，因为没有获得所有权</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> 字符串名 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

字符串名<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 字符串名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="追加字符"><a href="#追加字符" class="header-anchor">#</a> 追加字符</h3> <p>将<strong>单个字符</strong>附加到 String</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> 字符串名 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

字符串名<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 字符串名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="连接字符串"><a href="#连接字符串" class="header-anchor">#</a> 连接字符串</h3> <p><code>format!()</code>不会获得参数的所有权</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> str1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> str2 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> str3 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> str <span class="token operator">=</span> <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">&quot;{}{}{}&quot;</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">,</span> str3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="拼接字符串（不推荐）"><a href="#拼接字符串（不推荐）" class="header-anchor">#</a> 拼接字符串（不推荐）</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>只有 String 才能使用<code>+</code>，&amp;String 不能使用<code>+</code></li> <li>使用<code>+</code>只能将&amp;str 增加到 String</li></ul></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> str1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str2 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;bbb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> str3 <span class="token operator">=</span> str1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">&amp;</span>str2<span class="token punctuation">;</span>

<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;str1:{}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;str2:{}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;str3:{}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>str3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="遍历字符串"><a href="#遍历字符串" class="header-anchor">#</a> 遍历字符串</h3> <ul><li><p>字符遍历</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 字符串名 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> item <span class="token keyword">in</span> 字符串名<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;item={}&quot;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>字节遍历</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 字符串名 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> item <span class="token keyword">in</span> 字符串名<span class="token punctuation">.</span><span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;item={}&quot;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="字符串切片"><a href="#字符串切片" class="header-anchor">#</a> 字符串切片</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>Rust 中，中文汉字以 3 个字符来存储</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>字符串<span class="token punctuation">[</span>开始索引<span class="token punctuation">..</span>结束索引<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello={}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hell={}&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="获取字符串长度"><a href="#获取字符串长度" class="header-anchor">#</a> 获取字符串长度</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>字符串名<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="判断字符串是否存在指定内容"><a href="#判断字符串是否存在指定内容" class="header-anchor">#</a> 判断字符串是否存在指定内容</h3> <p>存在返回<code>true</code>，不存在返回<code>false</code></p> <div class="language-rust extra-class"><pre class="language-rust"><code>字符串名<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;指定内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="转小写"><a href="#转小写" class="header-anchor">#</a> 转小写</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>字符串名<span class="token punctuation">.</span><span class="token function">to_lowercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="转大写"><a href="#转大写" class="header-anchor">#</a> 转大写</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>字符串名<span class="token punctuation">.</span><span class="token function">to_uppercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h2> <p>数组也可以将多个值放在一个类型里，每个元素的类型必须相同，<strong>数组的长度是固定的</strong>。</p> <h3 id="定义-2"><a href="#定义-2" class="header-anchor">#</a> 定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 自动推导</span>
<span class="token keyword">let</span> 数组名 <span class="token operator">=</span> <span class="token punctuation">[</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 指定数据类型</span>
<span class="token keyword">let</span> 数组名<span class="token punctuation">:</span> <span class="token punctuation">[</span>数据类型<span class="token punctuation">;</span> 个数<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="访问元素"><a href="#访问元素" class="header-anchor">#</a> 访问元素</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 数组名<span class="token punctuation">[</span>索引<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="遍历数组"><a href="#遍历数组" class="header-anchor">#</a> 遍历数组</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> 数组名<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="取数组长度"><a href="#取数组长度" class="header-anchor">#</a> 取数组长度</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>数组名<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="元组（tuple）"><a href="#元组（tuple）" class="header-anchor">#</a> 元组（Tuple）</h2> <p>Tuple 可以将多个类型的多个值放在一个类型里，Tuple 的长度是固定的，一旦声明就无法改变</p> <h3 id="定义-3"><a href="#定义-3" class="header-anchor">#</a> 定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 自动推导</span>
<span class="token keyword">let</span> 元组名 <span class="token operator">=</span> <span class="token punctuation">(</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 指定数据类型</span>
<span class="token keyword">let</span> 元组名<span class="token punctuation">:</span> <span class="token punctuation">(</span>数据类型<span class="token punctuation">,</span> 数据类型<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="访问元素-2"><a href="#访问元素-2" class="header-anchor">#</a> 访问元素</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 元组名<span class="token punctuation">.</span>索引号<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="元组的结构"><a href="#元组的结构" class="header-anchor">#</a> 元组的结构</h3> <p>为了从元组中获取单个值，可以使用模式匹配（pattern matching）来解构元组值</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 元组名 <span class="token operator">=</span> <span class="token punctuation">(</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">(</span>item1<span class="token punctuation">,</span> item2<span class="token punctuation">)</span> <span class="token operator">=</span> 元组名<span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;item1={} item2={}&quot;</span><span class="token punctuation">,</span> item1<span class="token punctuation">,</span> item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="动态数组（vector）"><a href="#动态数组（vector）" class="header-anchor">#</a> 动态数组（Vector）</h2> <p>Vector 只能储存一系列<strong>相同类型</strong>的值。允许我们在一个单独的数据结构中储存多于一个的值，它在内存中连续存放所有的值。</p> <h3 id="定义-4"><a href="#定义-4" class="header-anchor">#</a> 定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 无初始值</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> Vector名<span class="token punctuation">:</span> Vec<span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span> <span class="token operator">=</span> Vec<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 有初始值</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> Vector名 <span class="token operator">=</span> <span class="token function">vec!</span><span class="token punctuation">[</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="增加元素"><a href="#增加元素" class="header-anchor">#</a> 增加元素</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>Vector名<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>元素<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="修改元素"><a href="#修改元素" class="header-anchor">#</a> 修改元素</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>Vector名<span class="token punctuation">[</span>下标<span class="token punctuation">]</span> <span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre></div><h3 id="删除元素"><a href="#删除元素" class="header-anchor">#</a> 删除元素</h3> <div class="language-rust extra-class"><pre class="language-rust"><code>Vector名<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>下标<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="访问元素-3"><a href="#访问元素-3" class="header-anchor">#</a> 访问元素</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>get 方法可以返回 Option 进行异常处理，索引语法发生异常时无法处理。</p></div> <ul><li><p>get 方法（推荐）</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">match</span> Vector名<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>下标<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Some</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;v1[0]={}&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span>
  None <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>索引语法</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> Vector名<span class="token punctuation">[</span>下标<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="遍历元素"><a href="#遍历元素" class="header-anchor">#</a> 遍历元素</h3> <ul><li><p>只读遍历</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token operator">&amp;</span>Vector名 <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>可写遍历</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> Vector名 <span class="token punctuation">{</span>
  <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token operator">*</span>item <span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="hashmap"><a href="#hashmap" class="header-anchor">#</a> HashMap</h2> <p>HashMap 以 键值对的形式存储数据，一个键(Key)对应一个值(Value)</p> <h3 id="创建-2"><a href="#创建-2" class="header-anchor">#</a> 创建</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span>HashMap<span class="token punctuation">;</span>

<span class="token comment">// 指定数据类型</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> HashMap名<span class="token punctuation">:</span> HashMap<span class="token operator">&lt;</span>数据类型<span class="token punctuation">,</span>数据类型<span class="token operator">&gt;</span> <span class="token operator">=</span> HashMap<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 类型推导</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> HashMap名 <span class="token operator">=</span> HashMap<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="增加元素-2"><a href="#增加元素-2" class="header-anchor">#</a> 增加元素</h3> <ul><li><p>当键不存在时则增加元素，存在时则修改元素</p> <div class="language-rust extra-class"><pre class="language-rust"><code>HashMap名<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>键<span class="token punctuation">,</span>值<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>仅当键不存在时增加元素</p> <div class="language-rust extra-class"><pre class="language-rust"><code>HashMap名<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span>键<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or_insert</span><span class="token punctuation">(</span>值<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="读取元素"><a href="#读取元素" class="header-anchor">#</a> 读取元素</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>get 方法可以返回 Option 进行异常处理，直接访问语法发生异常时无法处理。</p></div> <ul><li><p>直接访问</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> HashMap名<span class="token punctuation">[</span>键<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>get 方法</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">match</span> HashMap名<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>键<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Some</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span>
  None <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="遍历元素-2"><a href="#遍历元素-2" class="header-anchor">#</a> 遍历元素</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>遍历顺序为随机遍历</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> HashMap名 <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}: {}&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="结构体（struct）"><a href="#结构体（struct）" class="header-anchor">#</a> 结构体（Struct）</h2> <h3 id="定义-5"><a href="#定义-5" class="header-anchor">#</a> 定义</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>一旦 struct 的实例是可变的，那么实例中所有的字段都是可变的</li> <li>struct 中的字段默认是私有的（private）</li></ul></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> 结构体名 <span class="token punctuation">{</span>
  字段名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
  字段名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="定义方法"><a href="#定义方法" class="header-anchor">#</a> 定义方法</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">impl</span> 结构体名 <span class="token punctuation">{</span>
  <span class="token keyword">fn</span> 方法名<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> 返回值数据类型 <span class="token punctuation">{</span>
    <span class="token comment">// 访问属性</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>字段名
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>参数名和字段名同名时，可省略字段名直接写参数名</p></div> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 实例化</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span>  实例名 <span class="token operator">=</span> 结构体名 <span class="token punctuation">{</span>
  字段名<span class="token punctuation">:</span> 值<span class="token punctuation">,</span>
  字段名<span class="token punctuation">:</span> 值<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 访问数据</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> 实例名<span class="token punctuation">.</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改数据</span>
实例名<span class="token punctuation">.</span>字段名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>

<span class="token comment">// 调用方法</span>
实例名<span class="token punctuation">.</span>方法名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="更新语法"><a href="#更新语法" class="header-anchor">#</a> 更新语法</h3> <p>如果需要基于某个 struct 实例来创建一个新实例的时候，可以使用 struct 更新语法</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 实例名 <span class="token operator">=</span> 结构体名 <span class="token punctuation">{</span>
  字段名<span class="token punctuation">:</span> 值<span class="token punctuation">,</span>
  <span class="token punctuation">..</span>原实例名
<span class="token punctuation">}</span>
</code></pre></div><h3 id="元组结构体（tuple-struct）"><a href="#元组结构体（tuple-struct）" class="header-anchor">#</a> 元组结构体（Tuple Struct）</h3> <p>元组结构体内的成员没有名字，适用于不需要特别关系结构体内部成员的名字</p> <ul><li><p>定义</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> 元组结构体名<span class="token punctuation">(</span>数据类型<span class="token punctuation">,</span> 数据类型<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>使用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span>  实例名 <span class="token operator">=</span> 元组结构体名<span class="token punctuation">(</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;实例名.0={}, 实例名.1={}&quot;</span><span class="token punctuation">,</span> 实例名<span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">,</span> 实例名<span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="unit-like-struct"><a href="#unit-like-struct" class="header-anchor">#</a> Unit-Like Struct</h3> <p>单元结构体是没有任何字段的结构体</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> 空结构体名<span class="token punctuation">;</span>
</code></pre></div><h3 id="打印结构体"><a href="#打印结构体" class="header-anchor">#</a> 打印结构体</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Debug)]</span>

<span class="token keyword">struct</span> 结构体名 <span class="token punctuation">{</span>
  字段名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
  字段名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span>  实例名 <span class="token operator">=</span> 结构体名 <span class="token punctuation">{</span>
  字段名<span class="token punctuation">:</span> 值<span class="token punctuation">,</span>
  字段名<span class="token punctuation">:</span> 值<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 整行打印</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;实例名={:?}&quot;</span><span class="token punctuation">,</span>实例名<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 换行打印</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;实例名={:#?}&quot;</span><span class="token punctuation">,</span>实例名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="枚举（enum）"><a href="#枚举（enum）" class="header-anchor">#</a> 枚举（Enum）</h2> <p>枚举允许我们列举所有可能的值来定义一个类型</p> <h3 id="定义-6"><a href="#定义-6" class="header-anchor">#</a> 定义</h3> <ul><li><p>无参数枚举体</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">enum</span> 枚举名 <span class="token punctuation">{</span>
  属性名<span class="token punctuation">,</span>
  属性名<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>带参数枚举体</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">enum</span> 枚举名 <span class="token punctuation">{</span>
  属性名<span class="token punctuation">(</span>数据类型<span class="token punctuation">)</span><span class="token punctuation">,</span>
  属性名<span class="token punctuation">(</span>数据类型<span class="token punctuation">,</span> 数据类型<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="定义方法-2"><a href="#定义方法-2" class="header-anchor">#</a> 定义方法</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">impl</span> 枚举名 <span class="token punctuation">{</span>
  <span class="token keyword">fn</span> 方法名<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// 无参枚举体</span>
<span class="token keyword">let</span> 数据 <span class="token operator">=</span> 枚举名<span class="token punctuation">::</span>属性名<span class="token punctuation">;</span>
<span class="token comment">// 参数枚举体</span>
<span class="token keyword">let</span> 数据 <span class="token operator">=</span> 枚举名<span class="token punctuation">::</span>属性名<span class="token punctuation">(</span>值<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="option-枚举"><a href="#option-枚举" class="header-anchor">#</a> Option 枚举</h3> <p>Option 枚举 定义于标准库中，位于 Prelude (预导入模块)中。描述了：某个值可能存在(某种类型)或不存在的情况。</p> <p>Rust 中没有<code>Null</code>，但提供类类型<code>Null</code>概念的枚举：<code>Option&lt;T&gt;</code>：</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">enum</span> Option<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">Some</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span>
  None<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> sum <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="错误"><a href="#错误" class="header-anchor">#</a> 错误</h2> <ul><li>示例、代码原型、测试用 <code>panic!</code>、<code>unWrap</code>、<code>expect</code></li> <li>实际项目中应使用 Result</li></ul> <h3 id="可恢复错误"><a href="#可恢复错误" class="header-anchor">#</a> 可恢复错误</h3> <p>可恢复错误通常代表向用户报告错误和重试操作是合理的情况&gt;例如未找到文件。rust 中使用 <code>Result</code>枚举来实现</p> <ul><li><p>match</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> f <span class="token operator">=</span> File<span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">match</span> f <span class="token punctuation">{</span>
  <span class="token function">Ok</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> file<span class="token punctuation">,</span>
  <span class="token function">Err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">&quot;error: {:?}&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>unwrap 方法</p> <p>unwrap 是 match 表达式的一个快捷方法，效果等同于以上代码。</p> <ul><li>如果 Result 结果是 Ok，返回 <code>Ok</code> 里面的值</li> <li>如果 Result 结果是 Err，调用 <code>panic!</code> 宏</li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> f <span class="token operator">=</span> File<span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>expect 方法</p> <p>和 <code>unwrap</code> 类似，但可指定错误信息。</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> f <span class="token operator">=</span> File<span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;错误信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>unwrap_or 方法</p> <p>如果值不为 None 则返回 Some 中的值，否则是使用传入的参数代替</p></li> <li><p><code>?</code>运算符</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>?</code>运算符只能运用于**返回值为<code>Result</code>、<code>Option</code>**的函数</p></div> <p><code>?</code>运算符是传播错误的一种快捷方式，用于针对不同错误原因，返回同一种错误类型。</p> <ul><li>如果 Result 是 Ok: Ok 中的值就是表达式的结果，然后继续执行程序</li> <li>如果 Result 是 Err: Err 就是<strong>整个函数</strong>的返回值，就像使用了 return</li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function">readUsernameFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> io<span class="token punctuation">::</span>Error<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token keyword">mut</span> f <span class="token operator">=</span> File<span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;hello.txt&quot;</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function">read_to_string</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
  <span class="token function">Ok</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>Box&lt;dyn Error&gt;</code>: 任何可能的错误类型</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> std<span class="token punctuation">::</span>error<span class="token punctuation">::</span>Error<span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">match</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Ok</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span>i32<span class="token punctuation">,</span> Box<span class="token operator">&lt;</span><span class="token keyword">dyn</span> Error<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token operator">*</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok_or</span><span class="token punctuation">(</span><span class="token string">&quot;发生错误&quot;</span><span class="token punctuation">.</span><span class="token function">to_owned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
  <span class="token function">Ok</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="不可恢复错误"><a href="#不可恢复错误" class="header-anchor">#</a> 不可恢复错误</h3> <p>不可恢复错误是 bug 的同义词，如尝试访问超过数组结尾的位置。</p> <p>当 <code>panic!</code> 宏执行:</p> <ul><li>程序会打印一个错误信息</li> <li>展开(unwind) 、清理调用栈(Stack)</li> <li>退出程序</li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">&quot;出现不可恢复错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="单元包-crate"><a href="#单元包-crate" class="header-anchor">#</a> 单元包 (Crate)</h2> <p>模块 让我们可以将一个 crate 中的代码进行分组，以提高可读性与重用性。模块还可以控制项的私有性，即项是可以被外部代码使用的（public），还是作为一个内部实现的内容，不能被外部代码使用（private）。</p> <h3 id="声明"><a href="#声明" class="header-anchor">#</a> 声明</h3> <p>创建模块: <code>cargo new --lib 模块名</code></p> <p>\模块名\src\lib.rs</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">mod</span> 模块名 <span class="token punctuation">{</span>
  <span class="token comment">// 定义函数</span>
  <span class="token keyword">pub</span> <span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token comment">// 定义结构体</span>
  <span class="token keyword">pub</span> <span class="token keyword">struct</span> 结构体名 <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> 属性名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
    <span class="token keyword">pub</span> 属性名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 嵌套</span>
  <span class="token keyword">pub</span> <span class="token keyword">mod</span> 模块名<span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 调用父级函数</span>
      <span class="token keyword">super</span><span class="token punctuation">::</span>函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-3"><a href="#使用-3" class="header-anchor">#</a> 使用</h3> <ul><li><p>use 关键字引用</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> 模块名<span class="token punctuation">::</span>模块名<span class="token punctuation">;</span>
<span class="token keyword">use</span> 模块名<span class="token punctuation">::</span><span class="token punctuation">{</span>模块名<span class="token punctuation">,</span> 模块名<span class="token punctuation">}</span><span class="token punctuation">;</span>

模块名<span class="token punctuation">::</span>函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>绝对引用</p> <div class="language-rust extra-class"><pre class="language-rust"><code>模块名<span class="token punctuation">::</span>模块名<span class="token punctuation">::</span>函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>重导出
使用 use 将路径(名称)导入到作用域内后，该名称在此作用域内是私有的。</p> <p><code>pubuse</code>: 重导出。
将条目引入作用域，该条目可以被外部代码引入到它们的作用域</p></li> <li><p>导入依赖法</p> <p>\Cargo.toml</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[dependencies]</span>
<span class="token constant">模块名</span> <span class="token attr-value"><span class="token punctuation">=</span> { path = &quot;./模块名&quot; }</span>
</code></pre></div></li></ul> <h3 id="拆分模块"><a href="#拆分模块" class="header-anchor">#</a> 拆分模块</h3> <ul><li><p>\模块名.rs</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>\main.rs</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> 函数名<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  函数名<span class="token punctuation">::</span>函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="使用第三方库"><a href="#使用第三方库" class="header-anchor">#</a> 使用第三方库</h3> <p>导入依赖：</p> <p>\Cargo.toml</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[dependencies]</span>
<span class="token constant">库名</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;版本&quot;</span>
</code></pre></div><h2 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h2> <p>泛型是具体类型或其它属性的抽象代替。</p> <ul><li><p>处理重复代码的问题，提高代码复用能力</p></li> <li><p>编写的代码不是最终的代码，而是一种模板，里面有一些”占位符“</p></li> <li><p>编译器在编译时将“占位符”替换为具体的类型</p></li> <li><p>函数中使用泛型</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> 函数名<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span>参数名<span class="token punctuation">:</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> T <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>结构体中使用泛型</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> 结构体名<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  属性名<span class="token punctuation">:</span> T<span class="token punctuation">,</span>
  属性名<span class="token punctuation">:</span> T<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>枚举类型中使用泛型</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">enum</span> 枚举名<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  属性名<span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span>
  属性名<span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="trait"><a href="#trait" class="header-anchor">#</a> Trait</h2> <p>Trait，抽象的定义共享行为。告诉 Rust 编译器：某种类型具有哪些并且可以与其它类型共享的功能，与其它语言的接口(interface)类似，但有些区别。
Traitbounds(约束)：泛型类型参数指定为实现了特定行为的类型</p> <h3 id="定义-7"><a href="#定义-7" class="header-anchor">#</a> 定义</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">trait</span> Trait名 <span class="token punctuation">{</span>
  <span class="token keyword">fn</span> 方法名<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">fn</span> 方法名<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 默认实现</span>
  <span class="token keyword">fn</span> 方法名<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">pub</span> <span class="token keyword">struct</span> 结构体名 <span class="token punctuation">{</span>
  <span class="token keyword">pub</span> 属性名<span class="token punctuation">:</span> 数据类型<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> Trait名 <span class="token keyword">for</span> 结构体名 <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-4"><a href="#使用-4" class="header-anchor">#</a> 使用</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> 实例名 <span class="token operator">=</span> 结构体名 <span class="token punctuation">{</span>
  属性名<span class="token punctuation">:</span> 属性值<span class="token punctuation">,</span>
  属性名<span class="token punctuation">:</span> 属性值<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
实例名<span class="token punctuation">.</span>方法名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用-trait-作为参数"><a href="#使用-trait-作为参数" class="header-anchor">#</a> 使用 Trait 作为参数</h3> <p>Trait Bound 语法</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> 函数名<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Trait名<span class="token operator">&gt;</span><span class="token punctuation">(</span>参数名<span class="token punctuation">:</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">fn</span> 函数名<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Trait名 <span class="token operator">+</span> Trait名<span class="token operator">&gt;</span><span class="token punctuation">(</span>参数名<span class="token punctuation">:</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-trait-作为返回类型"><a href="#使用-trait-作为返回类型" class="header-anchor">#</a> 使用 Trait 作为返回类型</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Trait名 <span class="token punctuation">{</span>
  <span class="token keyword">return</span> 结构体名 <span class="token punctuation">{</span>
    属性名<span class="token punctuation">:</span> 属性值<span class="token punctuation">,</span>
    属性名<span class="token punctuation">:</span> 属性值<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <p>生命周期：引用保持有效的作用域。Rust 的每个引用都有自己的生命周期。大多数情况:生命周期是隐式的、可被推断的。当引用的生命周期可能以不同的方式互相关联时:手动标注生命周期。</p> <h2 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h2> <h3 id="访问环境变量"><a href="#访问环境变量" class="header-anchor">#</a> 访问环境变量</h3> <p>常用环境变量：</p> <ul><li><code>CARGO_PKG_VERSION</code>: Cargo.toml 版本号</li> <li><code>CARGO_PKG_AUTHORS</code>: Cargo.toml 作者</li> <li><code>WINDIR</code>: <code>C:\Windows</code></li> <li><code>PROGRAMFILES</code>: <code>C:\Program Files</code></li> <li><code>PROGRAMFILES(X86)</code>: <code>C:\Program Files (x86)</code></li></ul> <div class="language-rust extra-class"><pre class="language-rust"><code>env<span class="token punctuation">::</span><span class="token function">var</span><span class="token punctuation">(</span><span class="token string">&quot;环境变量名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="遍历环境变量"><a href="#遍历环境变量" class="header-anchor">#</a> 遍历环境变量</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> env<span class="token punctuation">::</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;  {}  =&gt;  {}&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="json"><a href="#json" class="header-anchor">#</a> Json</h2> <h3 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h3> <p>Cargo.toml</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[dependencies]</span>
<span class="token constant">serde</span> <span class="token attr-value"><span class="token punctuation">=</span> &quot;1.0.123&quot;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2021/2/8 下午3:10:11</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technicalnotes/back-end/Rust/Clap.html" class="prev">
        Clap
      </a></span> <span class="next"><a href="/technicalnotes/back-end/Rust/Rust-embed.html">
        内置资源
      </a>
      →
    </span></p></div> </main></div> <div class="footer" data-v-35b17a59><div id="footer-info" data-v-35b17a59><div class="footer-left" data-v-35b17a59>
      © 2020-2021
      <!----></div> <div class="footer-right" data-v-35b17a59>Theme:<a href="https://github.com/JoeyBling/vuepress-theme-yilia-plus" target="_blank">vuepress-theme-yilia-plus</a> by Litten</div></div> <div class="busuanzi" data-v-35b17a59><span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量
    <span id="busuanzi_value_site_pv"></span>次
    <span class="post-meta-divider">|</span></span> <span id="busuanzi_container_site_uv" style="display:none">
    本站访客数
    <span id="busuanzi_value_site_uv"></span>人
  </span></div></div></main><div class="global-ui"><!----><!----></div></div>
    <script src="/technicalnotes/assets/js/app.80cddeaf.js" defer></script><script src="/technicalnotes/assets/js/2.5e6c87b1.js" defer></script><script src="/technicalnotes/assets/js/68.18494a8c.js" defer></script><script src="/technicalnotes/assets/js/8.6058cd07.js" defer></script>
  </body>
</html>
